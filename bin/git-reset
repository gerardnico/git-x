#!/bin/bash
# for doc, see md file

set -Eeuo pipefail

# Bash lib library path detection
if [ "${GITURE_BASH_LIB_PATH:-}" == "" ]; then
  if command -v "brew" > /dev/null 2>&1; then
    GITURE_BASH_LIB_PATH="$(brew --prefix giture)/lib"
  else
    echo "error: GITURE_BASH_LIB_PATH is not set and a brew installation was not found"
    exit 1
  fi
fi

# shellcheck source=../..//bash-lib/lib/bashlib-error.sh
source "${GITURE_BASH_LIB_PATH}/bashlib-error.sh"
error::set_trap
# shellcheck source=../..//bash-lib/lib/bashlib-doc.sh
source "${GITURE_BASH_LIB_PATH}/bashlib-doc.sh"

function synopsis() {

  cat << EOF
Reset as if it was a clean: git clone
  (git reset Hard and git clean)
\`\`\`bash
$(basename "$0")
\`\`\`
EOF

}

# Doc Synopsis
if [ "${1:-}" = "synopsis" ]; then
  synopsis
  exit 0
fi

# Help
if [[ "${1:-}" =~ -h|--help|help ]]; then
  doc::help synopsis
  exit 0
fi

# Code
echo::eval "git reset --hard HEAD"
# delete untracked file
# force and d means recurse
echo::eval "git clean --force -d"
